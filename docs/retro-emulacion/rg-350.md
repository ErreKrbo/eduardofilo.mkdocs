---
layout: default
permalink: /retro-emulacion/rg-350.html
---

# RG-350

## Enlaces

#### Documentación
* [Dingoonity Wiki](https://wiki.dingoonity.org/)
* [Anbernic RG-350 Wiki](https://github.com/retrogamehandheld/RG-350/wiki)
* [Documentación SOC, HDMI y drivers Windows](https://github.com/retrogamehandheld/RG-350)
* [How to make an OPK](https://github.com/retrogamehandheld/OpenDingux/wiki/How-to-make-an-OPK)
* [RG 350 Tips, Emulators and Resources - Wagner's TechTalk](http://wagnerstechtalk.com/rg350tips/)
* [[DEVELOPMENT] How to compile for RG350? (Help needed)](https://boards.dingoonity.org/retro-game-350rg-350/(development)-how-to-compile-for-rg350-(help-needed)/)

#### Blogs, Foros
* [Foro en elotrolado.net](https://www.elotrolado.net/hilo_rg-350-miyoo-new-pocket-go2-y-game-kiddy-gdk350-350h-alternativas-a-la-gcw-zero-con-el-jz4770_2341546). Algunos posts escogidos:
    * [XMAME EN LA SD EXTERNA](https://www.elotrolado.net/hilo_rg-350-miyoo-new-pocket-go2-y-game-kiddy-gdk350-350h-alternativas-a-la-gcw-zero-con-el-jz4770_2341546_s4100#p1748612345)
* [Foro en Dingoonity.org](https://boards.dingoonity.org/retro-game-350rg-350/).
* [RG350 Subreddit](https://www.reddit.com/r/RG350/)

#### Emuladores, Ports y Aplicaciones

* Colección en rs97.bitgala.xyz: [Default](https://rs97.bitgala.xyz/RG-350/localpack/default_emulators/); [Extra](https://rs97.bitgala.xyz/RG-350/localpack/extra_emulators/)
* [RG350_pcsx4all](https://github.com/tonyjih/RG350_pcsx4all/releases)
* [Gambatte (GameBoy)](https://github.com/nvllsvm/gambatte-rg350)
* [RG-350 & Pocket Go 2 - Application Repo](https://github.com/SeongGino/RetroGame350-AppRepo/)
* [OpenDingux Software list](https://github.com/retrogamehandheld/OpenDingux/)
* [Ports y Emuladores de Gameblabla](https://boards.dingoonity.org/retro-game-350rg-350/rg-350-emulatorsgame-ports/)
* [BIOS de sistemas](https://replayers.org/bios-files/)
* [Ficheros SBI](http://psxdatacenter.com/sbifiles.html)
* [ScummVM for RG350](https://github.com/craigsc/scummvm-rg350/)
* Scrapers:
    * [ScreenScrapper](https://www.screenscraper.fr/)
    * [ARRM](http://www.jujuvincebros.fr/wiki/arrm/doku.php?id=scraper-en)

#### Sistema
* [Retro Game Handhelds](https://www.rghandhelds.com/)
* [Fork del firmware de Ninoh-FOX](https://github.com/Ninoh-FOX/OpenRGH)
* [Buildroot customized for the RG350](https://github.com/tonyjih/RG350_buildroot)

#### Hardware

* Para imprimir:
    * [Stick de perfil bajo](https://www.thingiverse.com/thing:3963163)
    * [Cruceta](https://www.thingiverse.com/thing:4006209)
    * [Botones ABXY](https://www.thingiverse.com/thing:4000064)
    * [Botones L1-R1](https://www.thingiverse.com/thing:4082955)
    * [Botones L2-R2](https://www.thingiverse.com/thing:4082965)
* Repuestos componentes:
    * [Pantalla](https://es.aliexpress.com/item/4000318225148.html)
    * [Stick analógico](https://www.ebay.com/itm/New-RG350-Joystick-Complete-Set-with-Flex-Cable-/163991400355)
* Adaptadores WiFi compatibles (listados en directorio `/lib/modules/3.12.0-dingux\+/kernel/drivers/net/wireless/`):
    * Realtek RTL8188EU 150Mb/s
    * Realtek RTL8192CU 300Mb/s

## Conceptos

#### Emuladores / Juegos / Ports / Aplicaciones

Cada elemento que aparece en el lanzador, en las distintas secciones, es una especie de acceso directo. Algunos llevan a comandos o ejecutables que hay en el sistema (fundamentalmente los de la sección Settings) pero normalmente nosotros sólo vamos a tratar con los que provengan de OPKs.

Los OPKs son paquetes (una especie de ZIP) que podemos asimilar a una aplicación de móvil. Un OPK o aplicación puede ser un emulador, un juego o port, una utilidad, etc. Dentro del OPK en un fichero se le dice al lanzador en qué categoría debe aparecer. Básicamente las secciones que se ven y que se recorren con L1 y R1:

* Applications
* Emulators
* Games
* Settings

Los ports son los que aparecen en Games. Nada impide que un emulador aparezca dentro de Games, pero todo el mundo pone las cosas siguiendo esta organización. Un port es una aplicación que ejecuta un juego concreto, normalmente un clásico, del que se dispone del código y que alguien ha compilado para OpenDingux que es el sistema de la RG-350. También en Games están los remakes hechos por aficionados o homebrew.

Un emulador es una aplicación, normalmente también de código abierto, que alguien ha compilado para OpenDingux. El emulador no contiene el código de ningún juego en concreto ni la BIOS de la máquina que emula. En teoría esto permite la libre distribución de los emuladores. Un emulador simula por software (virtualiza) un sistema que normalmente puede ejecutar códigos de juegos distintos que venían en cartucho, CD, un chip de memoria, tarjeta de memoria, etc. Son las ROMs.

En resumen:

* Port o juego: Un juego concreto normalmente un clásico de PC, un remake, juego indie o homebrew. En la RG350 tendrán forma de OPK.
* Emulador: Virtualiza una máquina que puede ejecutar varios juegos/ROMS. En cualquier máquina emuladora como la RG-350 tendrán distintas formas (.bin, .zip, .iso, .pbp, .smc, .nes, .sms, hasta el infinito). También suelen venir en forma de OPK.

#### Las ROMs y su organización

Las ROMs son los volcados a fichero del soporte digital donde se almacenaba el código y los datos (sonidos por ejemplo) del juego en la máquina original. En viejas recreativas y en máquinas de cartucho, este soporte solían ser chips de memoria no volátil. En las máquinas más modernas normalmente son CDs, DVDs, Bluray's. Las ROMs en la RG350 se suelen colocar en la tarjeta microSD externa. Pueden ir en la interna pero suele complicar el proceso de actualización del firmware. En cuanto a la estructura de carpetas, puede ser cualquiera ya que los emuladores normalmente al abrirlos, presentan una especie de explorador de archivos para seleccionar la ruta y archivo de la ROM a ejecutar.

A pesar de que las ROMs puedan estar en cualquier lugar, todo el mundo tiende a utilizar una estructura similar en la que los distintos sistemas se meten dentro de una carpeta llamada `roms` en la raíz de la tarjeta. Cada sistema a su vez suele ser otra carpeta con el acrónimo de la máquina como nombre. Más o menos se utilizan los siguientes acrónimos:

* **FBA**: Final Burn Alpha
* **FC**: NES (por Famicom)
* **GB**: Gameboy
* **GBA**: Gameboy Advance
* **GBC**: Gameboy Color
* **GG**: SEGA GameGear
* **MD**: SEGA Megadrive
* **NGP**: NeoGeo Pocket
* **PCE**: PC Engine / TurboGrafx-16
* **PS**: Sony PlayStation
* **SFC**: SuperNES (por Super Famicom)
* **SMS**: SEGA MasterSystem
* **WSC**: WonderSwan

#### La importancia de las BIOS

Las BIOS son unos ficheros parecidos a las ROMs que a diferencia de éstas están siempre presentes en la máquina. Es decir, así como las ROMs son código particular de cada juego, que digamos entra y sale de la máquina (cuando cambias el CD o cartucho), la BIOS también es código pero permanente de la máquina. Está guardado en un chip y contiene el código que se ejecuta cuando arranca la máquina (los menús de lanzamiento de juegos por ejemplo en consolas avanzadas) y librerías que utilizan los desarrolladores para hacer los juegos más fáciles de programar.

Los emuladores o bien incorporan una reimplementación de la BIOS (como el HLE de Pcsx4all) o bien es necesario que la pongamos nosotros. Aún en ese primer caso es conveniente utilizar la BIOS original. Si no la incluyen los emuladores es porque son código propietario del fabricante de la máquina, lo que impediría la libre distribución del emulador. Lo mismo que sucede con las ROMs.

[Más adelante](#bios) se incluye un listado de dónde buscan las BIOS los distintos emuladores.

#### BIOS de PlayStation

Siguiendo con el ejemplo de la BIOS HLE del emulador Pcsx4all, no es la real que puso Sony en sus máquinas, sino una BIOS que alguien prepararó haciendo ingeniería inversa por lo que nunca queda igual que la original. Esto se hace para poder distribuir el emulador y que sea funcional desde un principio. Porque si se incluye la BIOS original se comete un delito de propiedad intelectual y si no se incluye ningún tipo de BIOS el emulador ni siquiera arranca. Entonces se pone algo para salir del paso pero luego se le pide a los usuarios que busquen por su cuenta la BIOS original y la incorporen al emulador.

Para pasar de usar la BIOS emulada (HLE) a una original, primero hay que colocarla en el directorio `/media/data/local/home/.pcsx4all/bios/`, después arrancar el emulador, entrar en las opciones (tecla `Power`), abrir la sección `Core settings` y allí desactivar `HLE emulated BIOS` y seleccionar en `Set BIOS file` una de las que hayamos situado en el directorio indicado anteriormente. Por ejemplo:

![opciones_pcsx4all](/images/pages/rg350_screenshot006.png)

#### Sistemas de archivo

OpenDingux, el sistema que utiliza la RG350, es una distribución Linux. Por tanto es un sistema UNIX. En UNIX no existe el concepto de las unidades (como las típicas C:, D:, etc en Windows). Todo forma parte de un árbol de directorios cuya raíz es la `/` o root. Esto no quiere decir que un UNIX sólo pueda tener una unidad de almacenamiento. Lo que ocurre es que las distintas unidades se "montan" en distintos puntos del árbol de directorios.

El árbol de directorios base sobre el que se montan las unidades es ese archivo `rootfs.squashfs` (el nombre quiere decir "sistema de archivos raíz") que algunos habréis visto al pinchar la tarjeta interna en el PC poco antes de flashearla con otro firmware. Ahí comprimido está todo el sistema menos lo que se monta desde las tarjetas de memoria.

La tarjeta interna tiene dos particiones. La primera contiene el árbol root como hemos comentado, el kernel (del que no vamos a hablar, aunque es muy importante) y es de tipo FAT32, por eso se puede ver en Windows. Básicamente contiene el sistema. La segunda partición se monta en `/media/data` y está dedicada a contener la información de soporte a las aplicaciones, es decir configuraciones, librerías, archivos de datos (savestates por ejemplo) y las propias aplicaciones instaladas en la tarjeta interna. El formato de esta partición es EXT3, propio de Linux y por eso no se monta en Windows.

La tarjeta externa es casi equivalente a la segunda partición de la interna, es decir, sirve para contener aplicaciones. También es donde se suelen colocar las ROMs. La única partición de esta tarjeta se monta en `/media/sdcard`. Esta tarjeta externa puede estar en formatos FAT32 o los propios de Linux (ext2, ext3, ext4). ROGUE soporta además exFAT. En esta tarjeta lo único importante en cuanto a la estructura de carpetas es que exista en la raíz de la misma un directorio llamado `apps` (si está en formato FAT32 o exFAT será indiferente si está en mayúsculas, ya que estos sistemas de archivos no distinguen mayúsculas y minúsculas). El resto de cosas que pongamos en esta tarjeta (fundamentalmente ROMs) podrán organizarse como queramos (ver apartado [Las ROMs y su organización](#las-roms-y-su-organizacion)).

## Opciones para actualizar el firmware RG350-ROGUE-CFW

Hay tres opciones:

1. **Update**: Es una aplicación OpenDingux, por tanto se ejecuta desde la propia consola. No formatea, sino que sustituye los archivos que han cambiado en el nuevo firmware respecto de un sistema anterior. Recomendable para no perder ajustes de usuario, aunque el sistema a veces no queda del todo fino.
2. **Flasher**: Es una aplicación OpenDingux, por tanto se ejecuta desde la propia consola. Formatea completamente la SD interna con el nuevo firmware por lo que se pierden ajustes del usuario. Recomendable para solucionar problemas en updates que no han quedado bien.
3. **sd_image.bin**: Es una imagen para flashear la tarjeta interna desde un ordenador. Es parecida a la opción 2 y la única que sirve si se empieza con un sistema que no arranca. La imagen ocupa más porque es un volcado de todo lo que contiene la SD (incluidos los espacios vacíos de la tarjeta). El proceso incorpora la complejidad adicional de que tenemos que abrir la consola para extraer la microSD interna y utilizar algunas utilidades poco habituales. En [este video](https://www.youtube.com/watch?v=gyNDbmvH5Ro) se ilustra todo el procedimiento.

Así pues, para la primera actualización (y posteriores) se puede utilizar cualquier método. Dependiendo de la situación es más recomendable uno que otro. En general empezar por la opción 1, si no queda bien pasar a la 2 y si tampoco queda bien o no es posible utilizarlo porque la consola no arranca, usar el método 3.

## Flash de SD interna

Desde Linux:

```bash
$ sudo dd if=sd_image.bin of=/dev/mmcblk0 bs=2M
```

Desde Windows:

Utilizar [Balena Etcher](https://www.balena.io/etcher/) o mejor aún [Win32 Disk Imager](https://sourceforge.net/projects/win32diskimager/).

## Gestión de OPKs

* Descompresión: `unsquashfs fichero.opk`
* Compresión: `mksquashfs directorio fichero.opk`

## Cheatsheets

#### Versiones del firmware

|Fecha|Versión|
|:----|:------|
|2019-10-10|1.4|
|2019-10-18|1.5|
|2019-10-27|1.5.1|
|2019-11-10 (build date)|1.6|
|2019-11-17 (build date)|1.7|

#### Controles

|Aplicación|Function|Shortcut|
|:---------|:-------|:-------|
|General|Sharpness adjustment|`Power + Up/Down`|
|General|Force joystick mode|`Power + B`|
|General|Brighness adjustment|`Power + Volumen+/Volumen-`|
|General|Change hardware scaling|`Power + A`|
|General|Take screenshot|`Power + X`|
|General|Force return to gmenu2x/reload gmenu2x|`Power + Select`|
|General|Reset|`Power + Start` or `Reset` button|
|MAME X|Guardar|`START + Izquierda` luego seleccionar casilla de guardado (por letras, hay 29) y pulsar A|
|MAME X|Recuperar|`START + Derecha` luego seleccionar casilla donde se guardó y pulsar A|
|MAME X|Salir|`SELECT + START + L1 + R1`|
|FBA|Abrir menú|`START + L1 + R1` (`exit` para volver al menu principal de seleccion de juegos, desde allí dos veces `SELECT` para volver al menu principal de la consola)|

#### Puntos de montaje de las tarjetas

|Directorio|Elemento montado|
|:-----|:-------|
|`/media/system`|Primera partición de la SD interna|
|`/media/data`|Segunda partición de la SD interna|
|`/media/sdcard`|Primera partición de la SD externa|

#### Directorios/Ficheros interesantes

|Directorio|Contenido|
|:-----|:-------|
|`/media/data/local/home/`|Configuraciones. Enlace simbólico desde `/media/home`|
|`/media/data/local/home/.pcsx4all/`|Configuraciones del emulador PCSX4All (como las memory cards, los save states o BIOS). Consultar [aquí](https://github.com/retrogamehandheld/OpenDingux/wiki/Standard-file-locations) los directorios de datos de otras aplicaciones|
|`/media/data/apps/`|Aplicaciones (`.opk`) instaladas en la tarjeta interna|
|`/media/data/ROMS/`|ROMS de emuladores instaladas en la tarjeta interna (en v1.7 no viene este directorio)|
|`/usr/share/gmenu2x/sections/`|Aplicaciones y lanzadores de comandos en las distintas secciones del menú|
|`/var/log/messages`|Logs del sistema|
|`/proc/`|Ficheros asociados a procesos en ejecución como `cpuinfo` que muestra información sobre el procesador|
|`/media/data/local/home/.gmenu2x/`|Themes|
|`/media/data/local/home/.gmenu2x/skins/Default/wallpapers/`|Wallpapers|
|`/media/data/local/sbin/frontend_start`|Lanzador frontend|
|`/media/home`|Enlace simbólico de `/media/data/local/home`|
|`/usr/local`|Enlacce simbólico de `/media/data/local`|

#### BIOS
|Sistema|Emulador|Directorio|Fichero|
|:------|:-------|:---------|:------|
|Atari Lynx|Handy|`/media/data/local/home/.handy`|`lynxboot.img`|
|Gameboy|Gambatte|`/media/data/local/home/.gambatte/bios/`|`gb_bios.bin`|
|Gameboy Color|Gambatte|`/media/data/local/home/.gambatte/bios/`|`gbc_bios.bin`|
|Gameboy Advance|Gpsp|`/media/data/local/home/.gpsp/`|`gba_bios.bin`|
|MegaCD|Picodrive|`/media/data/local/home/.picodrive/`|`bios_CD_E.bin`; `bios_CD_J.bin`; `bios_CD_U.bin`|
|NeoGeo| |Mismo directorio de las ROMs|`neogeo.zip/uni-bios.rom`|
|PC-Engine CD|Temper|`/media/data/local/home/.Temper/syscards/`|`syscard3.pce`|
|PlayStation|Pcsx4all|`/media/data/local/home/.pcsx4all/bios/`|`psxonpsp660.bin`; `scph1001.bin`; `scph5500.bin`; `scph5501.bin`; `scph5502.bin`|

## Solución de problemas

#### Corrupción de lanzador

En ocasiones no se muestra correctamente el icono de una aplicación, o no apunta a donde debería. Puede suceder cuando hay dos OPK's con el mismo nombre en la SD interna y externa, y se borra uno de ellos por ejemplo. Para resetear la información, entrar en la sección donde esté el problema dentro de el directorio `/media/data/local/home/.gmenu2x/sections` y borrar el nombre de la aplicación problemática. Lo que hay allí no es la aplicación en sí sino un fichero tipo `.desktop` con metainformación (icono, descripción, etc.).

#### Particularidades juegos

* Metal Gear Solid PS1: Desactivar HLE en el emulador y seleccionar BIOS `scph1001.bin` (instrucciones [aquí](#bios-de-playstation)). [BIOS de sistemas](https://replayers.org/bios-files/)
* Final Fantasy VIII, IX y algunos juegos europeos: Necesitan parche anticopy o poner el archivo `.sbi` correspondiente a cada cd en el mismo directorio y con el mismo nombre. [Ficheros SBI](http://psxdatacenter.com/sbifiles.html)

## Previews de ROMs en Gmenu2x

Seguir los pasos de [este post](/2020-01-11-rg350_scraper.html).

## Backup de home

El directorio `/home/data/local/home` pertenece a la tarjeta interna y es de los más importantes puesto que es donde la mayoría (por no decir todos) los programas (emuladores, ports, aplicaciones) guardan sus ajustes (como los savestates de los emuladores o las memory cards de pcsx4all). Cuando flasheamos la tarjeta interna (con las opciones 2 y 3 del apartado [Opciones para actualizar el firmware RG350-ROGUE-CFW](#opciones-para-actualizar-el-firmware-rg350-rogue-cfw)) el contenido de este directorio se pierde. Una idea sería hacer un respaldo del mismo en la tarjeta externa (que no se altera durante el flasheo) y luego restaurarlo.

Podemos hacer el backup lanzando un comando de terminal ya sea conectando por SSH o utilizando una aplicación de terminal (como `ST-SDL`). El comando para realizar el backup es:

```bash
tar -cf /media/sdcard/home_backup.tar -C /media/data/local home
```

Para restaurar:

```bash
tar -xf /media/sdcard/home_backup.tar -C /media/data/local
```

El comando no es sensible a la ruta, es decir puede lanzarse desde cualquier directorio y genera el fichero `home_backup.tar` en la raíz de la tarjeta externa (ruta `/media/sdcard/` en el sistema de la consola).
